---
title: æ›´æ–°å’Œå®‰è£…è½¯ä»¶åŒ…
lang: zh-CN
tags: 
  - Linux
  - RHEL
  - RHCE
  - è®¤è¯è€ƒè¯•
categories: 
  - [å­¦ä¹ , Linux]
  - [æ—¥å¸¸è®°å½•]
  - [è¿ç§»æ–‡ç« ]
---
> ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚

â€‹è¿™ä¸€ç« çš„æ‰€æœ‰å…³äºè½¯ä»¶æ“ä½œçš„æµ‹è¯•ç¯å¢ƒä¸ºï¼šFedora33ã€‚

## æœ‰å…³å‘½ä»¤æ‘˜è¦

### RPM å‘½ä»¤æ‘˜è¦

| å‘½ä»¤                    | ä»»åŠ¡                                            |
| ----------------------- | ----------------------------------------------- |
| rpm -qa                 | åˆ—å‡ºå½“å‰å®‰è£…çš„æ‰€æœ‰ RPM è½¯ä»¶åŒ…                   |
| rpm -q NAME             | æ˜¾ç¤ºç³»ç»Ÿä¸Šå®‰è£…çš„ NAME çš„ç‰ˆæœ¬                    |
| rpm -qi NAME            | æ˜¾ç¤ºæœ‰å…³è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯                        |
| rpm -ql NAME            | åˆ—å‡ºè½¯ä»¶åŒ…ä¸­å«æœ‰çš„æ‰€æœ‰æ–‡ä»¶                      |
| rpm -qc NAME            | åˆ—å‡ºè½¯ä»¶åŒ…ä¸­å«æœ‰çš„é…ç½®æ–‡ä»¶                      |
| rpm -qd NAME            | åˆ—å‡ºè½¯ä»¶åŒ…ä¸­å«æœ‰çš„æ–‡æ¡£æ–‡ä»¶                      |
| rpm -q --changelog NAME | æ˜¾ç¤ºè½¯ä»¶åŒ…çš„ç®€çŸ­æ›´æ–°æ—¥å¿—æ‘˜è¦                    |
| rpm -q --scripts NAME   | æ˜¾ç¤ºè½¯ä»¶åŒ…åœ¨å®‰è£…ã€å‡çº§æˆ–åˆ é™¤æ—¶è¿è¡Œçš„ shell è„šæœ¬ |

### DNF å‘½ä»¤æ‘˜è¦

| å‘½ä»¤                      | ä»»åŠ¡                           |
| ------------------------- | ------------------------------ |
| dnf list [NAME-PATTERN]   | æŒ‰åç§°åˆ—å‡ºå·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶åŒ… |
| dnf group list            | åˆ—å‡ºå·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶ç»„       |
| dnf search KEYWORD        | æŒ‰å…³é”®å­—æœç´¢è½¯ä»¶åŒ…             |
| dnf info PKGNAME          | æ˜¾ç¤ºè½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯           |
| dnf install PKGNAME       | å®‰è£…è½¯ä»¶åŒ…                     |
| dnf group install GRPNAME | å®‰è£…è½¯ä»¶ç»„                     |
| dnf update [PKGNAME]      | æ›´æ–°æ‰€æœ‰ï¼ˆæˆ–æŒ‡å®šçš„ï¼‰è½¯ä»¶åŒ…     |
| dnf remove PKGNAME        | å¸è½½è½¯ä»¶åŒ…                     |
| dnf history               | æŸ¥çœ‹ DNF å†å²äº‹åŠ¡              |

## æ³¨å†Œç³»ç»Ÿè·å¾—çº¢å¸½æ”¯æŒ

### ä½¿ç”¨å›¾å½¢ç•Œé¢å·¥å…·è¿›è¡Œæ³¨å†Œ

â€‹é€šè¿‡ Gnome å›¾å½¢ç•Œé¢æ‰“å¼€ *Red Hat Subscription Manager*ï¼ˆçº¢å¸½è®¢é˜…ç®¡ç†å™¨ï¼‰ï¼Œè¿›è¡Œç”¨æˆ·èº«ä»½éªŒè¯åè¿›å…¥è®¢é˜…çª—å£ç‚¹å‡» *Register* æŒ‰é’®ï¼Œå¡«å†™å¹¶æäº¤ç›¸å…³ä¿¡æ¯ä¹‹åå³å¯è®¢é˜…æˆåŠŸã€‚å…³äºå…·ä½“æ“ä½œä¸å†èµ˜è¿°ã€‚

### ä»å‘½ä»¤è¡Œæ³¨å†Œ

```bash
# 1. æ³¨å†Œç³»ç»Ÿåˆ°çº¢å¸½è´¦æˆ·
[user@host ~]\$ subscrption-manager register --username=USERNAME --password=PASSWORD
# 2. æŸ¥çœ‹å¯ç”¨çš„è®¢é˜…
[user@host ~]\$ subscription-manager list --available | less
# 3. è‡ªåŠ¨é™„åŠ è®¢é˜…
[user@host ~]\$ subscription-manager attach --auto
# æˆ–è€…ä»å¯ç”¨è®¢é˜…åˆ—è¡¨ä¸­çš„ç‰¹å®šæ± ä¸­é™„åŠ è®¢é˜…
[user@host ~]\$ subscription-manager attach --pool=poolID
# 4. æŸ¥çœ‹å·²ç”¨çš„è®¢é˜…
[user@host ~]\$ subscription-manager list --consumed
# 5. å–æ¶ˆæ³¨å†Œç³»ç»Ÿ
[user@host ~]\$ subscription-manager unregister
```

> *subscription-manager* ä¹Ÿå¯æ­é…æ¿€æ´»å¯†é’¥ä½¿ç”¨è€Œä¸å¿…ä½¿ç”¨ç”¨æˆ·åæˆ–å¯†ç ä»¥ä¸ºå®ç°è‡ªåŠ¨åŒ–å®‰è£…å’Œéƒ¨ç½²æä¾›ä¾¿åˆ©ã€‚

### çº¢å¸½æˆæƒè¯ä¹¦

â€‹æ³¨å†Œçº¢å¸½åï¼Œç³»ç»Ÿçš„æˆæƒè¯ä¹¦å­˜å‚¨åœ¨ /etc/pki å’Œå…¶å­ç›®å½•ä¸­ã€‚

- */etc/pki/product* ä¸­çš„è¯ä¹¦çŸ¥åç³»ç»Ÿä¸Šå®‰è£…äº†å“ªäº›çº¢å¸½äº§å“ï¼›
- */etc/pki/consumer* ä¸­çš„è¯ä¹¦æŒ‡æ˜ç³»ç»Ÿæ‰€æ³¨å†Œåˆ°çš„çº¢å¸½è´¦æˆ·ï¼›
- */etc/pki/entitlement* ä¸­çš„è¯ä¹¦æŒ‡æ˜è¯¥ç³»ç»Ÿé™„åŠ æœ‰å“ªäº›è®¢é˜…ã€‚

## RPM è½¯ä»¶åŒ…

â€‹*RPM è½¯ä»¶åŒ…ç®¡ç†å™¨*æœ€åˆæ˜¯ç”±çº¢å¸½å¼€å‘çš„ï¼Œè¯¥ç¨‹åºæä¾›äº†ä¸€ç§æ ‡å‡†çš„æ–¹å¼æ¥æ‰“åŒ…è½¯ä»¶è¿›è¡Œåˆ†å‘ã€‚ä¸ä½¿ç”¨ä»å­˜æ¡£æå–åˆ°æ–‡ä»¶ç³»ç»Ÿçš„è½¯ä»¶ç›¸æ¯”ï¼Œé‡‡ç”¨ RPM è½¯ä»¶åŒ…å½¢å¼ç®¡ç†è½¯ä»¶è¦ç®€å•å¾—å¤šã€‚ç®¡ç†å‘˜å¯ä»¥é€šè¿‡å®ƒè·Ÿè¸ªè½¯ä»¶åŒ…æ‰€å®‰è£çš„æ–‡ä»¶ï¼Œéœ€è¦åˆ é™¤å“ªäº›è½¯ä»¶ï¼ˆå¦‚æœå¸è½½ï¼‰å¹¶æ£€æŸ¥ç¡®ä¿æ˜¾ç¤ºæ”¯æŒè½¯ä»¶åŒ…ï¼ˆå¦‚æœå®‰è£…ï¼‰ã€‚æœ‰å…³å·²å®‰è£è½¯ä»¶åŒ…çš„ä¿¡æ¯å­˜å‚¨åœ¨å„ä¸ªç³»ç»Ÿçš„æœ¬åœ°RPMæ•°æ®åº“ä¸­ã€‚

â€‹çº¢å¸½ä¸ºçº¢å¸½ä¼ä¸š Linux æä¾›çš„æ‰€æœ‰è½¯ä»¶éƒ½ä»¥ RPM è½¯ä»¶åŒ…çš„å½¢å¼æä¾›ã€‚

### RPM è½¯ä»¶åŒ…çš„æ–‡ä»¶åçº¦å®š

â€‹RPM è½¯ä»¶åŒ…çš„æ–‡ä»¶åä¸€èˆ¬çš„æ ¼å¼ä¸ºï¼šname-version-release.architecture.rpmï¼Œå¦‚ï¼šcoreutils-8.30-4.el8.x86_64.rpmã€‚

- name æ˜¯æè¿°è½¯ä»¶å†…å®¹çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¯è¯­ï¼›
- version æ˜¯åŸå§‹è½¯ä»¶çš„ç‰ˆæœ¬å·ï¼›
- release æ˜¯åŸºäºè¯¥ç‰ˆæœ¬çš„è½¯ä»¶åŒ…çš„å‘è¡Œç‰ˆå·ï¼Œç”±è½¯ä»¶æ‰“åŒ…å•†è®¾ç½®ï¼Œåè€…ä¸ä¸€å®šæ˜¯åŸå§‹è½¯ä»¶å¼€å‘å•†ï¼›
- architecture æ˜¯ç¼–è¯‘çš„è½¯ä»¶åŒ…è¿è¡Œçš„å¤„ç†å™¨æ¶æ„ã€‚*noarch* è¡¨ç¤ºè¯¥è½¯ä»¶åŒ…çš„å†…å®¹ä¸é™å®šæ¶æ„ã€‚

â€‹ä»è½¯ä»¶å­˜å‚¨åº“æœç´¢ã€ä¸‹è½½å’Œå®‰è£…è½¯ä»¶åŒ…æ—¶åªéœ€è¦è½¯ä»¶åŒ…çš„åç§°ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªç‰ˆæœ¬ï¼Œåˆ™ä¼šå®‰è£…æœ€é«˜ç‰ˆæœ¬ã€‚

â€‹æ¯ä¸ª RPM è½¯ä»¶åŒ…æ˜¯åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªç»„æˆéƒ¨åˆ†çš„ç‰¹æ®Šå­˜æ¡£ï¼š

- è½¯ä»¶åŒ…å®‰è£…çš„æ–‡ä»¶ï¼›
- å…ƒæ•°æ®-ä¸è½¯ä»¶åŒ…æœ‰å…³çš„ä¿¡æ¯ï¼Œå¦‚åç§°ã€ç‰ˆæœ¬ã€å‘è¡Œç‰ˆå’Œæ¶æ„ï¼›è½¯ä»¶åŒ…çš„æ‘˜è¦å’Œæè¿°ï¼›æ˜¯å¦è¦æ±‚å®‰è£…å…¶ä»–è½¯ä»¶åŒ…ï¼›æˆæƒè®¸å¯ä¿¡æ¯ï¼›è½¯ä»¶åŒ…æ›´æ”¹æ—¥å¿—ä»¥åŠå…¶ä»–è¯¦ç»†ä¿¡æ¯ï¼›
- åœ¨å®‰è£…ã€æ›´æ–°æˆ–åˆ é™¤æ­¤è½¯ä»¶åŒ…æ—¶å¯èƒ½è¿è¡Œçš„è„šæœ¬ï¼Œæˆ–è€…åœ¨å®‰è£…ã€æ›´æ–°æˆ–åˆ é™¤å…¶ä»–è½¯ä»¶åŒ…æ—¶è§¦å‘çš„è„šæœ¬ã€‚

â€‹é€šå¸¸ï¼Œè½¯ä»¶æä¾›å•†ä½¿ç”¨ GPG å¯†é’¥å¯¹ RPM è½¯ä»¶åŒ…è¿›è¡Œæ•°å­—ç­¾åï¼ŒRPM ä¼šé€šè¿‡ GPG å¯†é’¥ç­¾åæ¥éªŒè¯è½¯ä»¶åŒ…çš„å®Œæ•´æ€§ã€‚è‹¥ GPG ç­¾åä¸åŒ¹é…ï¼Œåˆ™ RPM ä¼šæ‹’ç»å®‰è£…è½¯ä»¶åŒ…ã€‚

â€‹RPM æ›´æ–°è½¯ä»¶ä¼šå…ˆåˆ é™¤æ—§æœ‰çš„è½¯ä»¶åŒ…ï¼ˆé€šå¸¸ä¼šä¿ç•™é…ç½®æ–‡ä»¶ï¼‰ç„¶åå®‰è£…æ–°ç‰ˆï¼Œé™¤äº†å†…æ ¸ã€‚

### 2. ä½¿ç”¨ RPM å®ç”¨ç¨‹åºå¤„ç†æœ¬åœ°è½¯ä»¶åŒ…

â€‹*rpm* å®ç”¨ç¨‹åºå¯è·å–è½¯ä»¶åŒ…æ–‡ä»¶å’Œå·²å®‰è£…è½¯ä»¶åŒ…çš„å†…å®¹çš„ç›¸å…³ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»å·²å®‰è£…è½¯ä»¶åŒ…çš„æœ¬åœ°æ•°æ®åº“ä¸­è·å–ä¿¡æ¯ã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨ *-p* é€‰é¡¹æ¥æŒ‡å®šæƒ³è·å–æœ‰å…³å·²ä¸‹è½½è½¯ä»¶åŒ…æ–‡ä»¶çš„ä¿¡æ¯ä»¥å®ç°åœ¨å®‰è£…å‰çš„æ£€æŸ¥ã€‚

â€‹ä½¿ç”¨ `rpm` å‘½ä»¤æŸ¥è¯¢æœ¬åœ°è½¯ä»¶åŒ…æ•°æ®åº“ä¿¡æ¯çš„ä¸€èˆ¬æ ¼å¼ä¸ºï¼š

```bash
rpm -q [select-options] [query-options]	# æŸ¥è¯¢æœ¬åœ°è½¯ä»¶åŒ…æ•°æ®åº“ä¿¡æ¯
```

â€‹å…³äºå·²å®‰è£…çš„è½¯ä»¶åŒ…çš„ä¸€èˆ¬ä¿¡æ¯çš„æŸ¥è¯¢ï¼š

```bash
[skinyi@skinyi ~]\$ rpm -qa		# åˆ—å‡ºå·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…
libgcc-10.2.1-9.fc33.x86_64
linux-firmware-whence-20210208-118.fc33.noarch
tzdata-2021a-1.fc33.noarch
libreport-filesystem-2.14.0-15.fc33.noarch
hwdata-0.345-1.fc33.noarch
......
# rpm -qf FILENAME	æŸ¥è¯¢å“ªä¸ªè½¯ä»¶åŒ…æä¾›å®‰è£…çš„æ–‡ä»¶
[skinyi@skinyi ~]\$ rpm -qf /etc/yum.repos.d
fedora-repos-33-3.noarch
fedora-repos-33-5.noarch
```

â€‹å…³äºç‰¹å®šè½¯ä»¶åŒ…çš„ä¿¡æ¯æŸ¥è¯¢ï¼š

```bash
# 1. rpm -q PKG_NAME		åˆ—å‡ºå½“å‰å®‰è£…çš„è½¯ä»¶åŒ…çš„ç‰ˆæœ¬
[skinyi@skinyi ~]\$ rpm -q dnf
dnf-4.8.0-1.fc33.noarch
# 2. rpm -qi PKG_NAME	è·å–æœ‰å…³è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯
[skinyi@skinyi ~]\$ rpm -qi kernel
Name        : kernel
Version     : 5.10.23
Release     : 200.fc33
Architecture: x86_64
Install Date: 2021å¹´03æœˆ19æ—¥ æ˜ŸæœŸäº” 10æ—¶09åˆ†52ç§’
Group       : Unspecified
Size        : 0
License     : GPLv2 and Redistributable, no modification permitted
......
# 3. rpm -ql PKG_NAME	åˆ—å‡ºè½¯ä»¶åŒ…å®‰è£…çš„æ–‡ä»¶
[skinyi@skinyi ~]\$ rpm -ql openssh
/etc/ssh
/etc/ssh/moduli
/usr/bin/ssh-keygen
/usr/lib/.build-id
/usr/lib/.build-id/4b
......
# 4. rpm -qc PKG_NAME	ä»…åˆ—å‡ºè½¯ä»¶åŒ…å®‰è£…çš„é…ç½®æ–‡ä»¶
[skinyi@skinyi ~]\$ rpm -qc openssh-clients
/etc/ssh/ssh_config
/etc/ssh/ssh_config.d/50-redhat.conf
# 5. rpm -qd PKG_NAME	ä»…åˆ—å‡ºè½¯ä»¶åŒ…å®‰è£…çš„æ–‡æ¡£æ–‡ä»¶
[skinyi@skinyi ~]\$ rpm -qd net-tools
/usr/share/man/de/man5/ethers.5.gz
/usr/share/man/de/man8/arp.8.gz
/usr/share/man/de/man8/ifconfig.8.gz
......
# 6. rpm -q --scripts PKG_NAME	åˆ—å‡ºåœ¨å®‰è£…æˆ–åˆ é™¤è½¯ä»¶åŒ…ä¹‹å‰æˆ–ä¹‹åè¿è¡Œçš„ shell è„šæœ¬
[skinyi@skinyi ~]$ rpm -q --scripts openssh-server
preinstall scriptlet (using /bin/sh):
getent group sshd >/dev/null || groupadd -g 74 -r sshd || :
getent passwd sshd >/dev/null || \
  useradd -c "Privilege-separated SSH" -u 74 -g sshd \
  -s /sbin/nologin -r -d /var/empty/sshd sshd 2> /dev/null || :
postinstall scriptlet (using /bin/sh):

 
if [ $1 -eq 1 ] && [ -x /usr/bin/systemctl ]; then 
        # Initial installation 
        /usr/bin/systemctl --no-reload preset sshd.service sshd.socket || : 
fi 

......
# 7. rpm -q --changelog PKG_NAME	åˆ—å‡ºè½¯ä»¶åŒ…çš„æ›´æ”¹ä¿¡æ¯
[skinyi@skinyi ~]\$ rpm -q --changelog audit
* ä¸‰ 8æœˆ 11 2021 Steve Grubb <sgrubb@redhat.com> 3.0.5-1
- New upstream bugfix release

* æ—¥ 8æœˆ 08 2021 Steve Grubb <sgrubb@redhat.com> 3.0.4-1
- New upstream feature release
......
# 8. rpm -pq[ilcd...]	PKG_NAME	æŸ¥è¯¢æœ¬åœ°è½¯ä»¶åŒ…ï¼ˆå·²ä¸‹è½½æœªå®‰è£…ï¼‰çš„ä¸Šè¿°ä¿¡æ¯ã€‚
```

â€‹å®‰è£…ç¦»çº¿ä¸‹è½½çš„è½¯ä»¶åŒ…ï¼š

```bash
# rpm -ivh name-version-release.arch.rpm	# å®‰è£…è½¯ä»¶åŒ…
# é€‰é¡¹æ„ä¹‰ï¼š
-i, --install	# å®‰è£…è½¯ä»¶åŒ…
-v, --verbose	# æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
-h, --hash	# å®‰è£…çš„æ—¶å€™åˆ—å‡ºå“ˆå¸Œæ ‡è®°
```

> å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶æ—¶è¦ç¡®ä¿å¯ä¿¡ï¼Œå› ä¸ºåœ¨å®‰è£…è¿‡ç¨‹ä¸­å…è®¸ä»¥ root ç”¨æˆ·æ‰§è¡Œä»»æ„è„šæœ¬ã€‚

### æå– rpm è½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶

â€‹ä½¿ç”¨ `rpm2cpio` å‘½ä»¤å¯ä»¥å°† rpm è½¯ä»¶åŒ…è½¬æˆæ ¼å¼ä¸º cpio çš„ç‰¹æ®Šå½’æ¡£æ–‡ä»¶ï¼Œä½¿ç”¨ `cpio` å‘½ä»¤åˆ™å¯ä»¥æå– cpio å½’æ¡£æ–‡ä»¶çš„å†…å®¹ã€‚å› æ­¤ï¼Œè¦å®ç°ä¸€æ¡å‘½ä»¤æå–ä¸€ä¸ªè½¯ä»¶åŒ…ä¸­çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ç®¡é“æ¥å®ç°ï¼š

```bash
[user@host ~]\$ rpm2cpio name-version-release.arch.rpm | cpio -id [PATTERN]	# æŒ‰ç…§ PATTERN æŒ‡å®šçš„æ¨¡å¼æå– rpm åŒ…ä¸­çš„æ–‡ä»¶
# cpio çš„å‘½ä»¤é€‰é¡¹
-i, --extract	# ä»åŒ…ä¸­æå–æ–‡ä»¶
-d, --make-directories	# éœ€è¦æ—¶è‡ªåŠ¨åˆ›å»ºç›®å½•
```

â€‹æå–çš„æ–‡ä»¶ä¼šå­˜æ”¾åœ¨å½“å‰ç›®å½•ï¼Œä¸”ä¼šè‡ªåŠ¨åˆ›å»ºå­ç›®å½•ã€‚

## ä½¿ç”¨ DNF ç®¡ç†è½¯ä»¶åŒ…

â€‹*DNF* ä¸º *RPM* çš„å‰ç«¯è½¯ä»¶ï¼Œé™¤äº†å¯ä»¥å®‰è£…è½¯ä»¶åŒ…ï¼Œå®ƒä¹Ÿå¯ä»¥å®ç°ä»è½¯ä»¶ä»“åº“æœç´¢ã€ä¸‹è½½ã€è§£å†³å®‰è£…ä¾èµ–çš„æ¯” *RPM* æ›´å®Œå–„çš„åŠŸèƒ½ã€‚

â€‹*YUM* ä½œä¸ºè½¯ä»¶åŒ…ç®¡ç†å™¨çš„è€å‰è¾ˆå°†è¦è¢« *DNF*æ‰€å–ä»£ï¼ˆç”±äºå…¶æ€§èƒ½å·®ã€å†…å­˜å ç”¨è¿‡å¤šã€ä¾èµ–è§£æé€Ÿåº¦å˜æ…¢ç­‰é•¿æœŸå­˜åœ¨çš„é—®é¢˜ï¼‰ï¼Œæ•…å°†åŸæ•™ç§‘ä¹¦ä¸­çš„å…³äº YUM ä»‹ç»çš„ä¸€ç« æ¢æˆå¯¹ DNF çš„ä»‹ç»ã€‚DNF ä½¿ç”¨ cã€c++ã€python è¯­è¨€ç¼–å†™ï¼Œå°†ä¾èµ–ç®¡ç†æ¨¡å—æŠ½è±¡ä¸º libsolv åº“æ¥ç®¡ç†è½¯ä»¶åŒ…çš„ä¾èµ–ï¼Œç›¸æ¯” YUM æé«˜äº†æ€§èƒ½ã€‚DNF å’Œ YUM çš„ç”¨æ³•å¤§ä½“ä¸Šæ˜¯ç›¸åŒçš„ã€‚

### ä½¿ç”¨ DNF æŸ¥æ‰¾è½¯ä»¶

```bash
# 1. dnf help	æ˜¾ç¤ºç”¨æ³•ä¿¡æ¯
[skinyi@skinyi ~]\$ dnf help
usage: dnf [options] COMMAND

ä¸»è¦å‘½ä»¤åˆ—è¡¨ï¼š

alias                     åˆ—å‡ºæˆ–åˆ›å»ºå‘½ä»¤åˆ«å
autoremove                åˆ é™¤æ‰€æœ‰åŸå…ˆå› ä¸ºä¾èµ–å…³ç³»å®‰è£…çš„ä¸éœ€è¦çš„è½¯ä»¶åŒ…
check                     åœ¨åŒ…æ•°æ®åº“ä¸­å¯»æ‰¾é—®é¢˜
check-update              æ£€æŸ¥æ˜¯å¦æœ‰è½¯ä»¶åŒ…å‡çº§
clean                     åˆ é™¤å·²ç¼“å­˜çš„æ•°æ®
deplist                   [å·²å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨ repoquery --deplist] åˆ—å‡ºè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»å’Œæä¾›è¿™äº›è½¯ä»¶åŒ…çš„æº
distro-sync               åŒæ­¥å·²ç»å®‰è£…çš„è½¯ä»¶åŒ…åˆ°æœ€æ–°å¯ç”¨ç‰ˆæœ¬
downgrade                 é™çº§åŒ…
......
# 2. dnf list [KEYWORD]	æ˜¾ç¤ºå·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶åŒ…
[root@skinyi ~]\# dnf list kernel
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:07:19 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚
å·²å®‰è£…çš„è½¯ä»¶åŒ…
kernel.x86_64             5.10.23-200.fc33              @updates
kernel.x86_64             5.13.12-100.fc33              @updates
# 3. dnf search KEYWORD	ä½¿ç”¨å…³é”®å­—æœç´¢è½¯ä»¶åŒ…
[skinyi@skinyi ~]\$ dnf search remote
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:02:41 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶43åˆ†32ç§’ã€‚
============================ åç§° å’Œ æ¦‚å†µ åŒ¹é…ï¼šremote ==============================
R-remotes.noarch : R Package Installation from Remote Repositories
RemoteBox.noarch : Open Source VirtualBox Client with Remote Management
anyremote.x86_64 : Remote control through Wi-Fi or bluetooth connection
anyremote-data.x86_64 : Configuration files for anyRemote
anyremote-doc.x86_64 : Documentation for anyRemote
chrome-remote-desktop.x86_64 : Remote desktop support for google-chrome & chromium
......
# 4. dnf info PKG_NAME	æŸ¥çœ‹è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®‰è£…æ‰€éœ€ç£ç›˜ç©ºé—´
[skinyi@skinyi ~]\$ dnf info httpd
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:05:28 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶43åˆ†32ç§’ã€‚
å¯å®‰è£…çš„è½¯ä»¶åŒ…
åç§°         : httpd
ç‰ˆæœ¬         : 2.4.48
å‘å¸ƒ         : 1.fc33
æ¶æ„         : x86_64
å¤§å°         : 1.4 M
æº           : httpd-2.4.48-1.fc33.src.rpm
ä»“åº“         : updates
æ¦‚å†µ         : Apache HTTP Server
URL          : https://httpd.apache.org/
åè®®         : ASL 2.0
æè¿°         : The Apache HTTP Server is a powerful, efficient,
             : and extensible web server.
# 5. dnf provides PATHNAME	æ˜¾ç¤ºæä¾›ä¸æŒ‡å®šè·¯å¾„åæ–‡ä»¶æˆ–ç›®å½•ç›¸åŒ¹é…çš„è½¯ä»¶åŒ…
[skinyi@skinyi ~]\$ dnf provides /var/www/html
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:07:46 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶43åˆ†32ç§’ã€‚
httpd-filesystem-2.4.46-1.fc33.noarch : The basic directory
     ...: layout for the Apache HTTP Server
ä»“åº“        ï¼šfedora
åŒ¹é…æ¥æºï¼š
æ–‡ä»¶å    ï¼š/var/www/html

httpd-filesystem-2.4.48-1.fc33.noarch : The basic directory
     ...: layout for the Apache HTTP Server
ä»“åº“        ï¼šupdates
åŒ¹é…æ¥æºï¼š
æ–‡ä»¶å    ï¼š/var/www/html

```

### ä½¿ç”¨ DNF å®‰è£…å’Œåˆ é™¤è½¯ä»¶

```bash
# 1. dnf install PKG_NAME	# è·å–å¹¶å®‰è£…è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä¾èµ–é¡¹
[root@skinyi ~]\# dnf install git
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:04:10 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚
ä¾èµ–å…³ç³»è§£å†³ã€‚
================================================================
 è½¯ä»¶åŒ…                 æ¶æ„   ç‰ˆæœ¬               ä»“åº“     å¤§å°
================================================================
å®‰è£…:
 git                    x86_64 2.31.1-3.fc33      updates 122 k
å®‰è£…ä¾èµ–å…³ç³»:
 git-core               x86_64 2.31.1-3.fc33      updates 3.6 M
 git-core-doc           noarch 2.31.1-3.fc33      updates 2.3 M
 perl-AutoLoader        noarch 5.74-471.fc33      updates  31 k
 perl-B                 x86_64 1.80-471.fc33      updates 189 k
 perl-Carp              noarch 1.50-457.fc33      fedora   29 k
 perl-Class-Struct      noarch 0.66-471.fc33      updates  32 k
 perl-Data-Dumper       x86_64 2.174-459.fc33     fedora   56 k
......
# 2. dnf update [PKG_NAME]	# æ›´æ–°æŒ‡å®šè½¯ä»¶æˆ–æ‰€æœ‰å·²å®‰è£…è½¯ä»¶
[root@skinyi ~]\# dnf update kernel
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:06:19 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚
ä¾èµ–å…³ç³»è§£å†³ã€‚
æ— éœ€ä»»ä½•å¤„ç†ã€‚
å®Œæ¯•ï¼
```

> è‹¥éœ€æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œä¸­çš„å†…æ ¸ï¼Œå¯ä»¥ä½¿ç”¨ `uname` å‘½ä»¤ã€‚
>
> ```bash
> [root@skinyi ~]\# uname -r
> 5.10.23-200.fc33.x86_64
> [root@skinyi ~]\# uname -a
> Linux skinyi.fedora 5.10.23-200.fc33.x86_64 \#1 SMP Thu Mar 11 22:18:30 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux
> ```

```bash
# 3. dnf remove PKG_NAME	# åˆ é™¤å®‰è£…çš„è½¯ä»¶åŒ…åŠå…¶ä¾èµ–åŒ…
[root@skinyi ~]\# dnf remove openssh
ä¾èµ–å…³ç³»è§£å†³ã€‚
================================================================
 è½¯ä»¶åŒ…             æ¶æ„      ç‰ˆæœ¬            ä»“åº“         å¤§å°
================================================================
ç§»é™¤:
 openssh            x86_64    8.4p1-7.fc33    @updates    1.8 M
ç§»é™¤ä¾èµ–çš„è½¯ä»¶åŒ…:
 openssh-clients    x86_64    8.4p1-7.fc33    @updates    1.8 M
 openssh-server     x86_64    8.4p1-7.fc33    @updates    924 k

äº‹åŠ¡æ¦‚è¦
================================================================
ç§»é™¤  3 è½¯ä»¶åŒ…
......
```

### ä½¿ç”¨ DNF å®‰è£…æˆ–åˆ é™¤è½¯ä»¶ç»„

*DNF* ä¹Ÿæœ‰è½¯ä»¶ç»„çš„æ¦‚å¿µï¼Œè½¯ä»¶ç»„æ˜¯å‡ºäºç‰¹å®šç›®çš„å½’ç±»åˆ°ä¸€èµ·å®‰è£…çš„ç›¸å…³è½¯ä»¶çš„é›†åˆã€‚

â€‹åœ¨ RHEL8 ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„ç»„ï¼šå¸¸è§„ç»„å’Œç¯å¢ƒç»„ï¼Œå…¶ä¸­å¸¸è§„ç»„æ˜¯è½¯ä»¶åŒ…çš„é›†åˆï¼Œç¯å¢ƒç»„æ˜¯å¸¸è§„ç»„çš„é›†åˆã€‚ä¸€ä¸ªç»„æä¾›çš„è½¯ä»¶åŒ…æˆ–ç»„å¯èƒ½ä¸º *mandatory*ï¼ˆå®‰è£…è¯¥è½¯ä»¶ç»„æ—¶å¿…é¡»å®‰è£…ï¼‰ã€*default*ï¼ˆå®‰è£…è¯¥ç»„æ—¶é€šå¸¸ä¼šå®‰è£…ï¼‰æˆ– *optional*ï¼ˆå®‰è£…è¯¥ç»„æ—¶ä¸äºˆä»¥å®‰è£…ï¼Œé™¤éç‰¹åˆ«è¦æ±‚ï¼‰ã€‚

#### æŸ¥çœ‹å·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶ç»„åç§°

```bash
[root@skinyi ~]\# dnf group list
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:17:43 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚
å¯ç”¨ç¯å¢ƒç»„ï¼š
   Fedora å®šåˆ¶æ“ä½œç³»ç»Ÿ
   æœ€å°åŒ–å®‰è£…
   Fedora Workstation
   Fedora Cloud Server
   ......
å·²å®‰è£…çš„ç¯å¢ƒç»„ï¼š
   Fedora Server ç‰ˆæœ¬
å·²å®‰è£…ç»„ï¼š
   æ— å¤´è®¾å¤‡ï¼ˆHeadlessï¼‰ç®¡ç†
å¯ç”¨ç»„ï¼š
   3D æ‰“å°
   ç®¡ç†å·¥å…·
   éŸ³é¢‘åˆ¶ä½œ
   å†™ä½œå’Œå‡ºç‰ˆ
   ......
```

> æœ‰äº›ç»„ä¸€èˆ¬é€šè¿‡ç¯å¢ƒç»„å®‰è£…ï¼Œé»˜è®¤ä¸ºéšè—ã€‚å¯ä»¥é€šè¿‡ `dnf group list hidden` å‘½ä»¤åˆ—å‡ºè¿™äº›éšè—ç»„ã€‚

#### æ˜¾ç¤ºè½¯ä»¶ç»„çš„ç›¸å…³ä¿¡æ¯

```bash
[root@skinyi ~]\# dnf group info "RPM Development Tools"
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:31:05 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚
ç»„ï¼šRPM å¼€å‘å·¥å…·
 æè¿°ï¼šè¿™äº›å·¥å…·ä¸­åŒ…æ‹¬äº†æ ¸å¿ƒå¼€å‘å·¥å…·ï¼Œå¦‚ rpmbuildã€‚
 å¿…è¦çš„è½¯ä»¶åŒ…ï¼š
   redhat-rpm-config
   rpm-build
 é»˜è®¤çš„è½¯ä»¶åŒ…ï¼š
   koji
   mock
   rpmdevtools
 å¯é€‰çš„è½¯ä»¶åŒ…ï¼š
   pungi
   rpmlint
```

#### å®‰è£…ä¸€ä¸ªè½¯ä»¶ç»„

```bash
[root@skinyi ~]\# dnf group install "Deepin Desktop Environment" --with-optional
ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:35:01 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚
ä¾èµ–å…³ç³»è§£å†³ã€‚
================================================================
 è½¯ä»¶åŒ…                  æ¶æ„   ç‰ˆæœ¬              ä»“åº“     å¤§å°
================================================================
å®‰è£…ç»„/æ¨¡å—åŒ…:
 chromium                x86_64 91.0.4472.164-1.fc33
                                                  updates  99 M
 deepin-calculator       x86_64 5.0.1-3.fc33      fedora  286 k
 deepin-calendar         x86_64 5.0.1-4.fc33      fedora  111 k
 deepin-desktop          x86_64 5.0.0-9.fc33.2    updates 1.9 M
 deepin-editor           x86_64 1.2.9.1-8.fc33.1  updates 1.3 M
 deepin-icon-theme       noarch 15.12.71-5.fc33   fedora   11 M
 deepin-image-viewer     x86_64 5.0.0-5.fc33      fedora  3.7 M
 deepin-picker           x86_64 5.0.1-3.fc33      fedora   83 k
 deepin-screenshot       x86_64 5.0.0-4.fc33      fedora  347 k
 ......
```

> *--with-optional* é€‰é¡¹æŒ‡å®šå®‰è£…å¯é€‰çš„è½¯ä»¶åŒ…ã€‚

### æŸ¥çœ‹è½¯ä»¶åŒ…ç®¡ç†çš„å†å²äº‹åŠ¡

â€‹æ‰€æœ‰å®‰è£…å’Œåˆ é™¤è½¯ä»¶åŒ…çš„äº‹åŠ¡æ—¥å¿—è®°å½•åœ¨ */var/log/dnf.rpm.log* ä¸­ã€‚

```bash
[root@skinyi ~]\# tail -n 5 /var/log/dnf.rpm.log
2021-09-01T17:22:45+0800 INFO --- logging initialized ---
2021-09-01T17:23:00+0800 INFO --- logging initialized ---
2021-09-01T17:23:36+0800 INFO --- logging initialized ---
2021-09-01T17:25:56+0800 INFO --- logging initialized ---
2021-09-01T17:27:31+0800 INFO --- logging initialized ---
```

â€‹ä½¿ç”¨ `dnf history` æ˜¾ç¤ºå®‰è£…å’Œåˆ é™¤äº‹åŠ¡çš„æ‘˜è¦ï¼š

```bash
[root@skinyi ~]\# dnf history
ID     | å‘½ä»¤è¡Œ                    | æ—¥æœŸå’Œæ—¶é—´       	| æ“ä½œ           | æ›´æ”¹   
--------------------------------------------------------------------------------
     3 | update                   | 2021-09-01 14:54 | I, U           |  283 EE
     2 | install nodejs           | 2021-03-19 11:05 | Install        |    6   
     1 |                          | 2021-03-19 10:07 | Install        |  658 EE
```

â€‹ä½¿ç”¨ `dnf history undo ID` é€‰é¡¹å¯ä»¥æ’¤é”€æŒ‡å®š ID çš„äº‹åŠ¡ã€‚
